<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Process Monitoring</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        #cpuTimeSeries, #memoryTimeSeries, #pieChart, #dependencyGraph {
            width: 800px;
            height: 400px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h1>Process Monitoring</h1>

    <div id="cpuTimeSeries"></div>
    <div id="memoryTimeSeries"></div>
    <div id="pieChart"></div>
    <div id="dependencyGraph"></div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
    <script src="{{ url_for('static', filename='js/graph.js') }}"></script>
    <script>
        // Fetch updated data and render charts
        function fetchData() {
            fetch('/updated_data')
                .then(response => response.json())
                .then(data => {
                    renderTimeSeriesCharts(data.cpuTimeSeries, data.memoryTimeSeries);
                    renderPieChart(data.processes);
                    renderDependencyGraph(data.dependency);
                })
                .catch(error => console.log(error));
        }

        // Refresh data every 5 seconds
        setInterval(fetchData, 5000);

        // Initial data fetch and chart rendering
        fetchData();
    </script>
</body>
</html>
